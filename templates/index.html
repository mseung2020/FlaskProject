<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PGJ6TWV8');
    </script>
    <!-- End Google Tag Manager -->    

    <meta charset="UTF-8">
    <!-- Î∞òÏùëÌòï ÎîîÏûêÏù∏ÏùÑ ÏúÑÌïú viewport ÏÑ§Ï†ï -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NewCandle‚Ñ¢</title>
    <link rel="icon" type="image/jpeg" href="{{ url_for('static', filename='image/logo.png') }}">
    <link rel="preload" as="image" href="{{ url_for('static', filename='image/logo.png') }}">
    
    <!-- Chart.js Î∞è ÌôïÎåÄ/Ï∂ïÏÜå ÌîåÎü¨Í∑∏Ïù∏ CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0"></script>

    <!-- wordcloud2.js CDN Ï∂îÍ∞Ä -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.1/wordcloud2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@400;700;900&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">
    
    <script>
      const searchIconUrl = "{{ url_for('static', filename='image/search.png') }}";
      const closeIconUrl = "{{ url_for('static', filename='image/close.png') }}";
    </script>

    <!-- Ïô∏Î∂Ä CSS ÌååÏùº -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/fonts.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/page1.css') }}">
  </head>
  <body data-mtab="chart">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PGJ6TWV8"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Ìó§Îçî ÏòÅÏó≠: ÏÇ¨Ïù¥Ìä∏ Î°úÍ≥† Î∞è ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
    <header role="banner">
      <div class="header-left">
        <img src="{{ url_for('static', filename='image/logo.png') }}" alt="NewCandle Logo" class="header-logo" onclick="location.href='/'">
        <h1 class="logo" onclick="location.href='/'" tabindex="0">NewCandle‚Ñ¢</h1>
      </div>
      
      <div class="menu-icon">&#9776;</div>
      
      <div class="header-right">
        <nav id="main-nav" aria-label="Î©îÏù∏ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò">
          <a href="/index" class="header-link active">Ï¢ÖÎ™© Î∂ÑÏÑù</a>
          <a href="/page2" class="header-link">Ìà¨Ïûê Ï†ïÎ≥¥</a>
          <a href="/page3" class="header-link">AI Ïó∞Íµ¨</a>
        </nav>
      </div>
    </header>

    <!-- Ïò§Î≤ÑÎ†àÏù¥ -->
    <div id="overlay"></div>
    
    <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà: Í∑∏Î¶¨Îìú Î†àÏù¥ÏïÑÏõÉÏúºÎ°ú Íµ¨ÏÑ± -->
    <main id="mainContainer">
      <!-- 1. Ï¢ÖÎ™© Í≤ÄÏÉâ Î∞ïÏä§ -->
      <section id="stockSearchBox" class="box" aria-label="Ï¢ÖÎ™© Í≤ÄÏÉâ">
        <label class="control-label">STOCK SEARCH</label>
        <div class="search-row">
          <input type="text" id="searchInput" class="bento-input" placeholder="Ï¢ÖÎ™©Î™Ö ÎòêÎäî ÏΩîÎìú" autocomplete="off" />
          <button id="searchBtn" class="bento-btn-icon">‚å´</button>
        </div>

        <!-- ‚úÖ Î™®Î∞îÏùº ÏûêÎèôÏôÑÏÑ± ÎìúÎ°≠Îã§Ïö¥(PCÏóêÎäî CSSÎ°ú Ïà®ÍπÄ) -->
        <div id="mobileSuggestBox" class="mobile-suggest" hidden>
          <div class="mobile-suggest-head">
            <span>AUTOCOMPLETE</span>
            <span id="mobileSuggestCount" class="mobile-suggest-count">0</span>
          </div>
          <div id="mobileSuggestList" class="mobile-suggest-list"></div>
        </div>
      </section>
      
      <!-- 2. ÏùºÏàò Í≤ÄÏÉâ Î∞è ÏòµÏÖò ÏÑ§Ï†ï Î∞ïÏä§ -->
      <section id="daysSearchBox" class="box" aria-label="Ï°∞Ìöå Í∏∞Í∞Ñ Î∞è ÏòµÏÖò ÏÑ§Ï†ï">
        <label class="control-label2">RANGE</label>
        <div class="control-row">
          <input type="text" id="daysInput" placeholder="242" aria-label="Ï°∞Ìöå Í∏∞Í∞Ñ (1~365)">
          <button class="chart-btn" onclick="PlusChart()" aria-label="ÌôïÎåÄ" >+</button>
          <button class="chart-btn" onclick="MinusChart()" aria-label="Ï∂ïÏÜå" >-</button>
          <!-- Ïù¥ÎèôÌèâÍ∑†ÏÑ† ÌÜ†Í∏Ä -->
          <div class="toggleSections1">
            <input type="checkbox" id="toggleMovingAverage" checked>
            <label for="toggleMovingAverage">Ïù¥ÎèôÌèâÍ∑†ÏÑ†</label>
          </div>
          <!-- Î≥ºÎ¶∞Ï†ÄÎ∞¥Îìú ÌÜ†Í∏Ä -->
          <div class="toggleSections1">
            <input type="checkbox" id="togglebollinger" unchecked>
            <label for="togglebollinger">Î≥ºÎ¶∞Ï†ÄÎ∞¥Îìú</label>
          </div>
          <!-- envelope ÌÜ†Í∏Ä -->
          <div class="toggleSections1">
            <input type="checkbox" id="toggleenvelope" unchecked>
            <label for="toggleenvelope">Envelope</label>
          </div>
          <!-- ichimoku ÌÜ†Í∏Ä -->
          <div class="toggleSections1">
            <input type="checkbox" id="toggleichimoku" unchecked>
            <label for="toggleichimoku">ÏùºÎ™©Í∑†ÌòïÌëú</label>
          </div>
          <!-- psar ÌÜ†Í∏Ä -->
          <div class="toggleSections1">
            <input type="checkbox" id="togglepsar" unchecked>
            <label for="togglepsar">PSAR</label>
          </div>
          <div class="question-wrapper">
            <img src="{{ url_for('static', filename='image/question.png') }}" alt="question" class="question" onclick="location.href='/page2'">
            <p class="arrow_box">ÏßÄÌëúÍ∞Ä Í∂ÅÍ∏àÌïòÎã§Î©¥<br>Ïó¨Í∏∞Î•º ÎàåÎü¨Î≥¥ÏÑ∏Ïöî!</p>
          </div>              

          <div class="daysearchrightContainer">
            <!-- Ï¥àÍ∏∞Ìôî Î≤ÑÌäº -->
            <button class="chart-btn" onclick="ResetChart()" aria-label="Ï¥àÍ∏∞Ìôî">
              <img src="{{ url_for('static', filename='image/reset.png') }}" 
                  alt="resetbutton" class="resetbutton" aria-label="Ï¥àÍ∏∞Ìôî">
            </button>
            <!-- Ï°∞Ìöå Í∏∞Ï§Ä ÎÇ†Ïßú ÌëúÏãú -->
            <div id="date_label">Ï°∞Ìöå Í∏∞Ï§Ä: Loading......</div>
          </div>
        </div>
      </section>

      <div id="TopRow1">
      
        <!-- 3. Ï¢ÖÎ™© Î¶¨Ïä§Ìä∏ Î∞ïÏä§ -->
        <section id="stockListBox" class="box" aria-label="Ï¢ÖÎ™© Î¶¨Ïä§Ìä∏">
          <div class="panel-header">
            <span>STOCK LIST</span>
            <span id="stockCountBadge" aria-label="ÌëúÏãú Ï¢ÖÎ™© Ïàò">0</span>
          </div>
          
          <div id="stockContainer">
            <div id="stockList">
              <div class="placeholder-msg sm">ÏΩîÏä§Ìîº ÏÉÅÏúÑ 50 Ï¢ÖÎ™©ÏùÑ<br>Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§...</div>
            </div>
          </div>

        </section>
        
        <!-- 4. ÏÉÅÎã® Ï∞®Ìä∏ ÏòÅÏó≠ (Ï∫îÎì§Ï∞®Ìä∏) -->
        <section id="chartBox" class="box" aria-label="Ï£ºÍ∞Ä Ï∞®Ìä∏">
          <div class="chart-wrapper">

            <!-- (A) AI Í≥ÑÏÇ∞Ï§ë Î°úÎçî(Îπ®Í∞Ñ ÎÑ§Î™®) : candle.html Íµ¨Ï°∞ Í∑∏ÎåÄÎ°ú :contentReference[oaicite:3]{index=3} -->
            <div id="loader-mainchart" class="loader hidden" aria-hidden="true">
              <div class="loader-inner">
                <div class="spinner"></div>
                <div class="loader-text">AI ANALYZING...</div>
              </div>
            </div>

            <!-- (B) Ï¥àÍ∏∞ ÎåÄÍ∏∞ ÏÜåÎÇò(SYSTEM READY) : candle.html Íµ¨Ï°∞ Í∑∏ÎåÄÎ°ú :contentReference[oaicite:4]{index=4} -->
            <div id="mainChartEmptyState" class="empty-state-container" aria-hidden="false">
              <div class="sonar-wrapper">
                <div class="sonar-emitter"></div>
                <div class="sonar-wave"></div>
                <div class="sonar-wave delay"></div>
              </div>
              <div class="empty-msg-text">
                SYSTEM READY<br><span>SELECT A STOCK TO START</span>
              </div>
            </div>

            <!-- (C) Ï¢åÏÉÅÎã® ‚ÄòÎèôÍ∑∏ÎùºÎØ∏ + Ïù¥Î¶Ñ‚Äô Î∞∞ÏßÄ(Í∏∞Ï°¥ Ïò§Î•∏Ï™Ω ÎùºÎ≤® ÎåÄÏ≤¥) -->
            <div id="mainOverlayLegend" class="main-overlay-legend" aria-live="polite"></div>

            <!-- (D) Í∏∞Ï°¥ chartLabel(id)ÏùÄ Ïú†ÏßÄ: Îã®ÏúÑ/ÏÉÅÌÉú ÌÖçÏä§Ìä∏Ïö© -->
            <div id="chartLabel" class="chart_unit" style="visibility:hidden;"></div>

            <canvas id="myChart" class="myChart" aria-label="Ï£ºÍ∞Ä Ï∫îÎì§ Ï∞®Ìä∏"></canvas>
          </div>
        </section>


        <!-- 9. Ìà¨ÏûêÏûê ÏßÄÌëú -->  
        <section id="sentimentIndexBox" class="box" aria-label="Ìà¨ÏûêÏûê ÏßÄÌëú">

          <div class="panel-header">SENTIMENT: 
            <div id="sentimentHeader" class="financial-header">
              <h3 id="sentimentIndexHeader">NO DATA</h3>
              <p class="unit-info">(ÏµúÏã† Ìà¨ÏûêÏûê Ïã¨Î¶¨)</p>
            </div>
          </div>
          
          <div id="tempContainer3">
            <!-- Î™®Î∞îÏùº Ï†ÑÏö© ÌÉ≠ Î©îÎâ¥ (Î™®Î∞îÏùºÏóêÏÑúÎßå Î≥¥ÏûÑ) -->
            <div class="investor-tabs" id="investorTabs">
              <button id="gosuTab" class="active" aria-pressed="true">Í∏∞Í¥Ä/Ïô∏Íµ≠Ïù∏</button>
              <button id="hasuTab" aria-pressed="false">Í∞úÏù∏ Ïã¨Î¶¨</button>
            </div>
            <!-- Ï¢åÏö∞ Ïª®ÌÖåÏù¥ÎÑà -->
            <!-- Ï¢åÏö∞ Ïª®ÌÖåÏù¥ÎÑà(ÍµêÏ≤¥Î≥∏) -->
            <div class="investor-indicator-container" id="investorStage">
              <!-- Í≥†Ïàò(Í∏∞Í¥Ä/Ïô∏Íµ≠Ïù∏) -->
              <div class="left-indicator">
                <div class="sentStage">
                  <!-- ‚úÖ Ïó¨Í∏∞Îßå Ïä§ÌÅ¨Î°§ (Î∂ÄÎ™® ÎÜíÏù¥ ÏïàÏóêÏÑú Ï†àÎåÄ Ïïà Îö´Í≥† ÎÇòÏò¥) -->
                  <div id="gosuIndexContent" class="sentScroll"></div>
                  <!-- ÏÉÅÎã® Ïª¨Îüº ÎùºÎ≤®(1ÌöåÎßå) -->
                  <div class="sentCols">
                    <span></span>
                    <span>Í∏∞Í¥Ä</span>
                    <span>Ïô∏Íµ≠Ïù∏</span>
                  </div>
                </div>
              </div>

              <!-- ÌïòÏàò(Í∞úÏù∏ Ïã¨Î¶¨) -->
              <div class="right-indicator">
                <div class="hasu-index-container">

                  <!-- ‚úÖ 404√ó190 ÏïàÏóêÏÑú "Ï¢å:ÎèÑÎÑõ / Ïö∞:Î≤îÎ°Ä" -->
                  <div class="sentimentRow">
                    <div class="sentimentDonutFrame">
                      <canvas id="sentimentChart" aria-label="Í∞úÏù∏ Ïã¨Î¶¨ Ï∞®Ìä∏"></canvas>
                    </div>

                    <div id="sentimentLegend" class="sentimentLegend" aria-label="Í∞úÏù∏ Ïã¨Î¶¨ Î≤îÎ°Ä">
                      <!-- JSÍ∞Ä ÏÑ∏Î°ú Î≤îÎ°ÄÎ•º Ï±ÑÏõÄ -->
                    </div>
                  </div>

                </div>
              </div>

            </div>
          </div>
        </section>
        
        <!-- 5. Î≥¥Ï°∞ÏßÄÌëú ÏòµÏÖò Ï≤¥ÌÅ¨Î∞ïÏä§ ÏòÅÏó≠ -->
        <section id="emptyBox" class="box" aria-label="Î≥¥Ï°∞ÏßÄÌëú ÏòµÏÖò ÏÑ†ÌÉù">
          
          <div class="panel-header">
            <span>INDICATOR LIST</span>
            <span id="indicatorAbbrBadge" class="indicatorAbbrBadge">VOL</span>
          </div>

          <!-- Î™®Î∞îÏùº Ï†ÑÏö© ÏïÑÏΩîÎîîÏñ∏ Ìó§Îçî (Í∏∞Ï°¥ Ïú†ÏßÄ) -->
          <div class="accordion-header"
            id="indicatorAccordionHeader"
            role="button"
            tabindex="0"
            aria-expanded="false"
            aria-controls="toggleSections2">
            <span class="accordion-title">ÏßÄÌëú Î™©Î°ù</span>
            <span class="accordion-toggle">&#9660;</span>
          </div>
          
          <div id="toggleSections2" class="accordion-content">

            <!-- GROUP: MARKET -->
            <div class="groupTitle">
              <span class="t">MARKET</span><span class="line"></span>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleVolume" checked>
              <label for="toggleVolume" class="indCard" data-abbr="VOL">
                <div class="indTop">
                  <span class="abbr">VOL</span>
                  <span class="name">Í±∞ÎûòÎüâ</span>
                </div>
                <div class="desc">Volume</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleTradingvalue">
              <label for="toggleTradingvalue" class="indCard" data-abbr="TV">
                <div class="indTop">
                  <span class="abbr">TV</span>
                  <span class="name">Í±∞ÎûòÎåÄÍ∏à</span>
                </div>
                <div class="desc">Trading Value</div>
              </label>
            </div>

            <!-- GROUP: TREND -->
            <div class="groupTitle">
              <span class="t">TREND</span><span class="line"></span>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleMACD">
              <label for="toggleMACD" class="indCard" data-abbr="MACD">
                <div class="indTop">
                  <span class="abbr">MACD</span>
                  <span class="name">MACD</span>
                </div>
                <div class="desc">Ïù¥ÎèôÌèâÍ∑†Ï∂îÏÑ∏</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleADX">
              <label for="toggleADX" class="indCard" data-abbr="ADX">
                <div class="indTop">
                  <span class="abbr">ADX</span>
                  <span class="name">ADX</span>
                </div>
                <div class="desc">ÌèâÍ∑†Î∞©Ìñ•ÏßÄÏàò</div>
              </label>
            </div>

            <!-- GROUP: VOLATILITY -->
            <div class="groupTitle">
              <span class="t">VOLATILITY</span><span class="line"></span>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleATR">
              <label for="toggleATR" class="indCard" data-abbr="ATR">
                <div class="indTop">
                  <span class="abbr">ATR</span>
                  <span class="name">ATR</span>
                </div>
                <div class="desc">ÌèâÍ∑†Î≥ÄÎèôÎ≤îÏúÑ</div>
              </label>
            </div>

            <!-- GROUP: OSCILLATORS -->
            <div class="groupTitle">
              <span class="t">OSCILLATORS</span><span class="line"></span>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleRSI">
              <label for="toggleRSI" class="indCard" data-abbr="RSI">
                <div class="indTop">
                  <span class="abbr">RSI</span>
                  <span class="name">RSI</span>
                </div>
                <div class="desc">ÏÉÅÎåÄÍ∞ïÎèÑÏßÄÏàò</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleSTOCH">
              <label for="toggleSTOCH" class="indCard" data-abbr="STO">
                <div class="indTop">
                  <span class="abbr">STO</span>
                  <span class="name">STOCH</span>
                </div>
                <div class="desc">Ïä§ÌÜ†Ï∫êÏä§Ìã±</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleSTOCHRSI">
              <label for="toggleSTOCHRSI" class="indCard" data-abbr="SRSI">
                <div class="indTop">
                  <span class="abbr">SRSI</span>
                  <span class="name">STOCHRSI</span>
                </div>
                <div class="desc">Ïä§ÌÜ†Ï∫êÏä§Ìã± + RSI</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleCCI">
              <label for="toggleCCI" class="indCard" data-abbr="CCI">
                <div class="indTop">
                  <span class="abbr">CCI</span>
                  <span class="name">CCI</span>
                </div>
                <div class="desc">ÏÉÅÌíàÏ±ÑÎÑêÏßÄÏàò</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleROC">
              <label for="toggleROC" class="indCard" data-abbr="ROC">
                <div class="indTop">
                  <span class="abbr">ROC</span>
                  <span class="name">ROC</span>
                </div>
                <div class="desc">Ï∂îÏÑ∏Î≥ÄÎèôÎ•†</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleUO">
              <label for="toggleUO" class="indCard" data-abbr="UO">
                <div class="indTop">
                  <span class="abbr">UO</span>
                  <span class="name">Ultimate Osc</span>
                </div>
                <div class="desc">Ultimate Oscillator</div>
              </label>
            </div>

            <div class="indicatorItem">
              <input type="checkbox" id="toggleWILLIAMS">
              <label for="toggleWILLIAMS" class="indCard" data-abbr="W%R">
                <div class="indTop">
                  <span class="abbr">W%R</span>
                  <span class="name">Williams %R</span>
                </div>
                <div class="desc">Williams %R</div>
              </label>
            </div>

          </div>
        </section>

        
        <!-- 6. ÌïòÎã® Ï∞®Ìä∏ ÏòÅÏó≠ (Î≥¥Ï°∞ÏßÄÌëú Ï∞®Ìä∏Îì§) -->
        <section id="IndexBox" class="box" aria-label="Î≥¥Ï°∞ÏßÄÌëú Ï∞®Ìä∏">
          <!-- Í±∞ÎûòÎüâ Ï∞®Ìä∏ -->
          <div id="volumeBox">
            <div id="volumeLabel" class="volume_label" style="display: none;"></div>
            <canvas id="myVolumeChart" class="indexchart" aria-label="Í±∞ÎûòÎüâ Ï∞®Ìä∏"></canvas>
          <!-- Í±∞ÎûòÎåÄÍ∏à Ï∞®Ìä∏ -->
          </div>
          <div id="tradingvalueBox">
            <div id="tradingvalueLabel" class="tradingvalue_label" style="display: none;"></div>
            <canvas id="tradingvalueChart" class="indexchart" aria-label="Í±∞ÎûòÎåÄÍ∏à Ï∞®Ìä∏"></canvas>
          </div>
          <!-- RSI Ï∞®Ìä∏ -->
          <div id="rsiBox">
            <div id="rsiLabel" class="rsi_label" style="display: none;"></div>
            <canvas id="rsiChart" class="indexchart" aria-label="RSI Ï∞®Ìä∏"></canvas>
          </div>
          <!-- STOCH Ï∞®Ìä∏ -->
          <div id="stochBox">
            <div id="stochLabel" class="stoch_label" style="display: none;"></div>
            <canvas id="stochChart" class="indexchart" aria-label="STOCH Ï∞®Ìä∏"></canvas>
          </div>
          <!-- STOCHRSI Ï∞®Ìä∏ -->
          <div id="stochrsiBox">
            <div id="stochrsiLabel" class="stochrsi_label" style="display: none;"></div>
            <canvas id="stochrsiChart" class="indexchart" aria-label="STOCHRSI Ï∞®Ìä∏"></canvas>
          </div>
          <!-- MACD Ï∞®Ìä∏ -->
          <div id="macdBox">
            <div id="macdLabel" class="macd_label" style="display: none;"></div>
            <canvas id="macdChart" class="indexchart" aria-label="MACD Ï∞®Ìä∏"></canvas>
          </div>
          <!-- ADX Ï∞®Ìä∏ -->
          <div id="adxBox">
            <div id="adxLabel" class="adx_label" style="display: none;"></div>
            <canvas id="adxChart" class="indexchart" aria-label="ADX Ï∞®Ìä∏"></canvas>
          </div>
          <!-- Williams %R Ï∞®Ìä∏ -->
          <div id="williamsBox">
            <div id="williamsLabel" class="williams_label" style="display: none;"></div>
            <canvas id="williamsChart" class="indexchart" aria-label="Williams %R Ï∞®Ìä∏"></canvas>
          </div>
          <!-- CCI Ï∞®Ìä∏ -->
          <div id="cciBox">
            <div id="cciLabel" class="cci_label" style="display: none;"></div>
            <canvas id="cciChart" class="indexchart" aria-label="CCI Ï∞®Ìä∏"></canvas>
          </div>
          <!-- ATR Ï∞®Ìä∏ -->
          <div id="atrBox">
            <div id="atrLabel" class="atr_label" style="display: none;"></div>
            <canvas id="atrChart" class="indexchart" aria-label="ATR Ï∞®Ìä∏"></canvas>
          </div>
          <!-- Ultimate Oscillator Ï∞®Ìä∏ -->
          <div id="uoBox">
            <div id="uoLabel" class="uo_label" style="display: none;"></div>
            <canvas id="uoChart" class="indexchart" aria-label="Ultimate Oscillator Ï∞®Ìä∏"></canvas>
          </div>
          <!-- ROC Ï∞®Ìä∏ -->
          <div id="rocBox">
            <div id="rocLabel" class="roc_label" style="display: none;"></div>
            <canvas id="rocChart" class="indexchart" aria-label="ROC Ï∞®Ìä∏"></canvas>
          </div>
        </section>

        <!-- 10. ÏõåÎìú ÌÅ¥ÎùºÏö∞Îìú -->        
        <section id="wordCloudBox" class="box" aria-label="ÏõåÎìú ÌÅ¥ÎùºÏö∞Îìú ÏòÅÏó≠">

          <div class="panel-header">WORDCLOUD: 
            <div class="wordcloud-header">
              <h3 id="wordCloudTitle">NO DATA</h3>
              <div class="unit-info" id="wordCloudSubTitle">(ÏµúÏã† Ï£ºÏöî ÌÇ§ÏõåÎìú)</div>
            </div>
          </div>

          <div class="table-wrapper">
            <div id="wordCloudContainer">
              <canvas id="wordCloudCanvas"></canvas>
              <span id="wordCloudPlaceholder" style="display:none;">
                ÌòÑÏû¨ Ï°∞Ìöå Í∞ÄÎä•Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.
              </span>
            </div>
          </div>
        </section>

      </div>

      <!-- Î≥ÑÎèÑÏùò Ïª®ÌÖåÏù¥Î°ú Í∞ÄÎ°úÎπÑÏú® Ï°∞Ï†ï(1:1) -->
      <div id="bottomRow1">

        <!-- 7. Ïû¨Î¨¥ÎπÑÏú® ÏßÄÌëú -->
        <section id="tempBox1" class="box" aria-label="ÏûÑÏãú Ï∞®Ìä∏1">

          <div class="panel-header"> FINANCIAL METRICS: 
            <div id="financialHeader" class="financial-header">
                <h3 id="selectedStockName">NO DATA</h3>
                <p class="unit-info">(Îã®ÏúÑ: %, Ïõê, Î∞∞)</p>
              </div>
          </div>

          <div id="tempContainer1">
            <div class="table-wrapper">
              <table id="financialTable">
                <thead>
                  <tr>
                    <th>Í∏∞Í∞Ñ</th>
                    <th>Î∂ÄÏ±ÑÎπÑÏú®</th>
                    <th>Ïú†Î≥¥Ïú®</th>
                    <th>Îß§Ï∂úÏï°<br>Ï¶ùÍ∞ÄÏú®</th>
                    <th>EPS<br>Ï¶ùÍ∞ÄÏú®</th>
                    <th>ROA</th>
                    <th>ROE</th>
                    <th>EPS</th>
                    <th>BPS</th>
                    <th>PER</th>
                    <th>PBR</th>
                    <th>EV/<br>EBITDA</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>24ÎÖÑ</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                  </tr>
                  <tr>
                    <td>23ÎÖÑ</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                  </tr>
                  <tr>
                    <td>22ÎÖÑ</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </section>

        <!-- 8. ÌòÑÍ∏àÌùêÎ¶Ñ ÏßÄÌëú -->
        <section id="tempBox2" class="box" aria-label="ÌòÑÍ∏àÌùêÎ¶Ñ ÏßÄÌëú">
          <div class="panel-header"> CASH FLOW: 
            <div id="cashHeader" class="financial-header">
              <h3 id="cashIndexHeader">NO DATA</h3>
              <p class="unit-info">(Îã®ÏúÑ: Ïñµ Ïõê)</p>
            </div>
          </div>
          <div class="table-wrapper cashflowWrap">
            <!-- LEFT: Ï∞®Ìä∏ ÌîÑÎ†àÏûÑ -->
            <div class="cashflowChartFrame">
              <canvas id="cashflowChart"></canvas>
            </div>

            <!-- RIGHT: ÏÑ∏Î°ú ÏöîÏïΩ Ïπ¥Îìú(ÏòÅÏóÖ/Ìà¨Ïûê/Ïû¨Î¨¥) -->
            <div id="undicisionedContainer" class="cashflowSummary"></div>
          </div>
        </section>
        
      </div>

      <!-- ÎßàÏßÄÎßâ Ï§Ñ 1:1 ÎπÑÏú® -->
      <div id="bottomRow2">
      </div>

    </main>

    <!-- Ìë∏ÌÑ∞ -->
    <footer>
      <p>&copy; 2026 NewCandle‚Ñ¢. All rights reserved.</p>
    </footer>

    <!-- ‚úÖ Mobile Bottom Tab Bar (Î™®Î∞îÏùºÏóêÏÑúÎßå Î≥¥ÏûÑ) -->
    <nav class="mobile-tabbar" aria-label="Î™®Î∞îÏùº ÌïòÎã® ÌÉ≠">
      <button type="button" class="tab-btn active" data-tab="chart" aria-pressed="true">
        <span class="tab-ic">üìà</span>
        <span class="tab-tx">CHART</span>
      </button>
      <button type="button" class="tab-btn" data-tab="sent" aria-pressed="false">
        <span class="tab-ic">üôÇ</span>
        <span class="tab-tx">SENT</span>
      </button>
      <button type="button" class="tab-btn" data-tab="news" aria-pressed="false">
        <span class="tab-ic">üì∞</span>
        <span class="tab-tx">NEWS</span>
      </button>
      <button type="button" class="tab-btn" data-tab="fund" aria-pressed="false">
        <span class="tab-ic">üìä</span>
        <span class="tab-tx">FUND</span>
      </button>
    </nav>

    
    <!-- script.js ÌååÏùº Î°úÎìú: Í∏∞Îä•Í≥º Ï∞®Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏Î•º Îã¥Îãπ -->
    <script src="{{ url_for('static', filename='js/page1.js') }}"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelector('.menu-icon').addEventListener('click', function() {
          toggleMenu();
        });
        document.getElementById('overlay').addEventListener('click', function() {
          toggleMenu();
        });
      });
        
      function toggleMenu() {
        const nav = document.getElementById('main-nav');
        const overlay = document.getElementById('overlay');
        
        nav.classList.toggle('nav-active');
        overlay.classList.toggle('active');
      }

      function setupInvestorTabsUnified() {
        const gosuTab = document.getElementById('gosuTab');
        const hasuTab = document.getElementById('hasuTab');
        const stage = document.getElementById('investorStage');
        if (!gosuTab || !hasuTab || !stage) return;

        const setMode = (mode) => {
          const isGosu = (mode === 'gosu');
          gosuTab.classList.toggle('active', isGosu);
          hasuTab.classList.toggle('active', !isGosu);
          gosuTab.setAttribute('aria-pressed', isGosu ? 'true' : 'false');
          hasuTab.setAttribute('aria-pressed', !isGosu ? 'true' : 'false');

          stage.classList.toggle('show-hasu', !isGosu);

          // ‚úÖ ÌïòÏàò Î∑∞Î°ú Ï†ÑÌôò Ïãú Chart.jsÍ∞Ä Ïà®ÍπÄ ÏÉÅÌÉúÏóêÏÑú ÎßåÎì§Ïñ¥ÏßÑ Í≤ΩÏö∞Í∞Ä ÏûàÏñ¥ resize
          if (!isGosu && window.sentimentChartInstance) {
            requestAnimationFrame(() => window.sentimentChartInstance.resize());
          }
        };

        gosuTab.addEventListener('click', () => setMode('gosu'));
        hasuTab.addEventListener('click', () => setMode('hasu'));

        setMode('gosu'); // Ï¥àÍ∏∞
      }
      document.addEventListener('DOMContentLoaded', setupInvestorTabsUnified);      
      
    </script> 
  </body>
</html>
